---
title: Set up DNS and certificate for the gateway
metaDescription: 'Learn how to set up DNS and certificate for your pipeline gateway.'
freshnessValidatedDate: never
---

The gateway is deployed in a Kubernetes cluster, such as Amazon EKS, within an Amazon VPC. New Relic APM agents are configured to route their telemetry data to this Gateway cluster, where initial processing occurs. Filtered data is then sent to New Relic for further analysis.

Setting up a private DNS hostname for the gateway cluster ensures reliable communication between New Relic APM agents and the gateway within your network. This hostname provides a stable reference point, eliminating the need for external DNS services. Issuing a certificate for the private DNS hostname secures data transmission via HTTP, HTTP2, or gRPC, encrypting telemetry data to protect against interception and unauthorized access. Validating the certificate through AWS ACM establishes trust and authenticates communication, preventing on-path attacks and ensuring secure data delivery.

For configuring the Application Load Balancer (ALB):
- **HTTP:** Data from New Relic APM agents supports HTTP1 protocol, so configure the ALB to handle HTTP1 communication.
- **HTTP2:** OpenTelemetry agents can communicate over HTTP2 protocol. Ensure the ALB is configured to support HTTP2 for such agents.
- **gRPC:** OpenTelemetry agents may also send data over gRPC protocol. While configuring the ALB, you can choose gRPC for communication between the ALB and gateway backend pods. This is optional, as HTTP2 functions effectively based on testing.

Follow these steps to set up a private DNS hostname and certificate for gateway:
1. Create a DNS hostname. For information, refer to [Working with private hosted zones](https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/hosted-zones-private.html) in AWS documentation.
2. Obtain a certificate for the gateway hostname. For information, refer to [Request a public certificate](https://docs.aws.amazon.com/acm/latest/userguide/acm-public-certificates.html) in AWS documentation.
