---
title: Set up and deploy Pipeline Control gateway
metaDescription: 'Learn how to set up and deploy the Pipeline Control gateway to manage the flow of data from your monitored entities to New Relic.'
freshnessValidatedDate: never
---

Set up and deploy the Pipeline Control gateway to manage the flow of data from your monitored entities to New Relic.

## Set up Pipeline Control gateway [#set-up-gateway]

To set up Pipeline Control gateway:

1. In your New Relic account, in Integrations & Agents, click **Set up Pipeline Control**, or search for **gateway** and select **Pipeline Control gateway**. 
2. Ensure the account selected is the one you want to use for Pipeline Control. If not, click **Select an account**, select the account of your choice, and then click **Continue**.
3. To enter your credentials, provide an existing license key or create a new key, and then click **Continue**.  
4. Select an existing Kubernetes cluster using the drop-down menu, or create a new one.
5. If you create a new cluster, enter the cluster name and namespace. The default namespace is **newrelic**.
6. Download the configuration file, **values-newrelic-gateway.yaml**, to a directory.
7. Run the installation command shown on screen:
    
    ```bash
    helm repo add newrelic https://helm-charts.newrelic.com && helm repo update && \
    helm upgrade --install newrelic-gateway --version 0.0.41-beta -n newrelic \
    newrelic/agent-control --create-namespace --values /path/to/values-newrelic-gateway.yaml --devel
    ```

    <callout variant="tip">
        Replace `/path/to/values-newrelic-gateway.yaml` with the directory where the configuration file is located. 
    </callout>
8. Click **Continue**.
9. Click **Test connection** and wait for a successful connection.

When you create your first gateway cluster, it sets up a unified configuration across all gateway clusters within your organization. This means the following:

- **Unified configuration:** All gateway clusters within an organization are configured identically, ensuring consistency in data processing and management.
- **Agent Control integration:** We leverage Agent Control within the cluster to push gateway rules to the gateway clusters. Customers will notice this integration in their Helm chart during setup.
- **Optimizing data flow:** You might want to deploy multiple gateway clusters to optimize data flow across different regions or network segments. This approach can enhance performance and reduce latency by processing data closer to its source.

To view details of your gateway setup, go to New Relic Control and click **Gateway**.

## Use case: Optimize data flow across multiple regions
Imagine you're a customer managing a sophisticated observability setup with New Relic. Your operations span multiple geographic regions, each with its own unique data management challenges. Specifically, you operate Kubernetes clusters across two primary regions: Region A and Region B.

**Objective:** Optimize data handling and reduce unnecessary data transfer to maximize efficiency and minimize costs.<p/>
**Current setup:** You already have a gateway cluster (GC1) deployed. Your data-producing Kubernetes clusters in Region A are configured to route all telemetry data through GC1. This setup allows you to filter out irrelevant data, ensuring that only critical signals are sent to the New Relic backend.<p/>
**Challenge with Region B:** Your Kubernetes clusters in Region B also need data processing. You have considered utilizing GC1 for Region B's data, but this introduces some inefficiencies:
- **Increased latency:** Data sent from Region B to Region A adds delay, which can impact real-time monitoring capabilities.
- **Higher costs:** Inter-region data transfer may incur additional egress costs, increasing operational expenses.<p/>
**Solution:** Deploy multiple gateway clusters:
- Deploy a new gateway cluster (GC2) in Region B.
- Configure your Kubernetes clusters in Region B to filter their data through GC2. This reduces the distance data travels, minimizes latency, and eliminates inter-region transfer fees.<p/>
**Outcome:**
- **Improved performance:** With GC2 deployed locally in Region B, you significantly reduce data transmission delays, enhancing your ability to react swiftly to critical events.
- **Cost efficiency:** By keeping data processing localized, you avoid unnecessary cross-region charges, effectively managing your operational budget.
- **Scalable architecture:** Adding GC2 provides a scalable architecture ready to support future expansions or operational shifts.

This strategy of deploying multiple, region-specific gateway clusters helps maintain streamlined operations and ensures your data monitoring remains both effective and economical.

## Add more clusters
To add a new cluster to your gateway setup, 
1. Open New Relic Control, and then select **Gateway**.
2. In the clusters table, click **Add a cluster**.
3. Follow the instructions in the [gateway setup](/docs/new-relic-control/pipeline-control/set-up-and-deploy-pipeline-control#set-up-gateway).
4. Come back to the gateway summary page. You should see your newly added cluster. 

After you have created your gateway clusters, add and deploy pipeline rules to the clusters. Refer to [Create pipeline rules](/docs/new-relic-control/pipeline-control/create-pipeline-rules).
