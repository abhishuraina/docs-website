---
title: Load balancer for gateway cluster
metaDescription: 'Learn how to set up a load balancer for your gateway cluster to manage the flow of data from your monitored entities to New Relic.'
freshnessValidatedDate: never
---

Implementing a load balancer is crucial for managing scalability and efficiency in data processing through the Pipeline Control gateway, especially when the gateway is deployed as a Kubernetes cluster. The following general instructions provide a framework applicable to various environments and load balancer technologies.

1. Assess load requirements:

    * Determine expected data throughput and identify potential bottlenecks.
    * Evaluate the number of APM agents and peak load times.

2. Select load balancer type:

    * Choose a [software load balancer that integrates well with Kubernetes](https://kubernetes.io/docs/concepts/services-networking/ingress-controllers/). Options include cloud-based solutions such as [AWS Application Load Balancer](https://docs.aws.amazon.com/eks/latest/userguide/alb-ingress.html), [Google Cloud Load Balancer](https://cloud.google.com/kubernetes-engine/docs/concepts/ingress), or [Azure Load Balancer](https://learn.microsoft.com/en-us/troubleshoot/azure/azure-kubernetes/load-bal-ingress-c/create-unmanaged-ingress-controller?tabs=azure-cli), as well as open-source solutions like [NGINX](https://kubernetes.github.io/ingress-nginx/) or [Traefik](https://doc.traefik.io/traefik/providers/kubernetes-ingress/).

3. Configure load balancer:

    * Set up the load balancer to distribute traffic evenly across multiple gateway instances within the Kubernetes cluster.
    * Implement health checks to ensure only healthy instances receive traffic.

4. Implement auto-scaling:

    * Configure auto-scaling policies to add or remove instances based on predefined thresholds, such as CPU usage or network traffic.
    * Monitor performance metrics to adjust scaling policies as needed.

5. Test and optimize:

    * Conduct load testing to ensure effective traffic distribution and identify any bottlenecks.
    * Optimize configurations to minimize latency and maximize throughput.

Next, you will explore how to [implement a load balancer specifically using AWS services](/docs/new-relic-control/pipeline-control/aws-alb-for-gateway), providing detailed instructions for setting up and configuring an AWS Elastic Load Balancer within a Kubernetes environment.
