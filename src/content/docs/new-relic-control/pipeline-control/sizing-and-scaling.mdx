---
title: Gateway sizing and scaling guide
metaDescription: 'Learn how to allocate sufficient resources to the gateway to maintain its reliability.'
freshnessValidatedDate: never
---

It is crucial to allocate sufficient resources to the gateway to maintain its reliability and prevent data loss. If the gateway goes down, you risk losing telemetry data, which can impact your monitoring and analytics capabilities.

This guide helps you determine the appropriate resources for deploying and scaling Pipeline Control gateway in your environment. Understanding these specifications is essential for ensuring optimal performance and efficient data processing.

## Default configuration

The gateway is configured with a default memory allocation of 2 GB per pod.

## Performance specifications

With a single CPU core and 100 drop rules per MELT type, the gateway can process the following volumes of telemetry data:

<table>
    <thead>
        <tr>
            <th>Data type</th>
            <th>Processing capacity</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>Metrics</td>
            <td>7,000 data points per second</td>
        </tr>
        <tr>
            <td>Events</td>
            <td>4,500 events per second</td>
        </tr>
        <tr>
            <td>Logs</td>
            <td>2,700 logs per second</td>
        </tr>
        <tr>
            <td>Traces</td>
            <td>3,300 spans per second</td>
        </tr>
    </tbody>
</table>


## Agent handling capacity

A single gateway pod can handle between 15-35 agents, with request sizes ranging from 26-250 KB of uncompressed data per second. 

<img
  title="Agent handling capacity"
  alt="A diagram representing gateway pod agent handling capacity."
  src="/images/agent-handling-capacity.webp"
/>

<Callout variant="tip">These capacity estimates are based on measurements from existing deployments. Your actual requirements may vary depending on your specific data patterns and monitoring needs.</Callout>

## Recommendations for gateway configuration
To further enhance your gateway's performance and scalability, consider the following configuration settings based on your agent mapping. To access these settings, go to **New Relic Control > Gateway > Settings**.

### Minimum and maximum replicas
- **Minimum replicas:** Set a baseline number of gateway replicas to accommodate regular data loads, ensuring redundancy and reliability. This helps prevent data loss and maintains performance stability during peak periods. The minimum recommended value is **2**, which is also the default setting.
- **Maximum replicas:** Determine the maximum number of replicas required to handle peak usage periods effectively. This configuration enables the gateway cluster to scale dynamically, providing sufficient resources for high traffic without compromising performance. You can set up to a maximum of **15** replicas.

### CPU utilization threshold
- **Scaling threshold:** Specify the CPU utilization percentage at which your gateway cluster will automatically scale. Configuring a scaling threshold ensures efficient resource management, preventing overcrowding and maintaining steady data processing. The default setting is **60%**.

### Health and performance management
- **Gather diagnostic logs:** Regularly check gateway diagnostic logs for insights into gateway health and operation. Monitoring logs is essential for timely troubleshooting and maintaining optimal performance. By default, diagnostic logging is turned off. 
- **Bypass gateway rules:** In instances of low available CPU resources, bypass complex gateway rules. This precaution ensures continued data flow to New Relic, even if sensitive data is received, allowing resource conservation and uninterrupted telemetry processing. By default, bypassing gateway rules is turned off.

## Next step
Next, you learn how to [modify your agent configuration](/docs/new-relic-control/pipeline-control/modify-agent-configuration) to send data via the gateway.