---
title: Cloud Rule API
metaDescription: 'Learn how to use the Cloud Rule API to manage data filtering and processing in New Relic Control.'
tags:
    - New Relic One
    - Pipeline control
    - Cloud rules
freshnessValidatedDate: never
---

The cloud rules API is a powerful tool within New Relic's Pipeline Control, enabling you to manage telemetry processing rules in both hosted and on-premise environments. This API provides a unified interface for creating, reading, and deleting rules, allowing you to optimize data processing and manage costs effectively.

The API allows you to define NRQL-based rules for processing telemetry data. These rules can be used to filter, drop, and transform data as it flows into New Relic, helping you manage data volume and enhance data quality.

## API endpoints [#api-endpoints]


<CollapserGroup>

    <Collapser 
    id="create-rule" 
    title="Create Pipeline Cloud Rule"
    >
### Create rule [#create-rule]

The **CreatePipelineCloudRule** mutation is used to create a new pipeline rule in New Relic's cloud environment. This mutation allows users to manage data by applying specific NRQL queries, scoped to a particular account. It facilitates automated data processing and management by executing the specified NRQL query.

**Example usage:**

    ```graphql
        mutation CreatePipelineCloudRule {
            createPipelineCloudRule(
                pipelineCloudRuleEntity: {
                    scope: { id: "1", type: ACCOUNT }
                    name: "Pipeline Rule"
                    nrql: "DELETE version, message FROM MyEvent"
                }
            ) {
                entity {
                    id
                    type
                    name
                    description
                    nrql
                }
            }
        }
    ```

This example creates a pipeline rule named "Pipeline Rule" that deletes the **version** and **message** attributes from **MyEvent** data, scoped to account ID "1". The response includes details about the created rule, such as its ID, type, name, description, and NRQL query.

#### Parameters 

<table>
    <thead>
        <tr>
            <th>Parameter</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>Mutation Name</td>
            <td>CreatePipelineCloudRule</td>
        </tr>
        <tr>
            <td>Function Call</td>
            <td>createPipelineCloudRule</td>
        </tr>
        <tr>
            <td>pipelineCloudRuleEntity</td>
            <td>Input object containing the details of the pipeline rule to be created.</td>
        </tr>
        <tr>
            <td>scope</td>
            <td>Specifies the scope of the rule.</td>
        </tr>
        <tr>
            <td>scope.id</td>
            <td>The unique identifier for the scope, e.g., "1".</td>
        </tr>
        <tr>
            <td>scope.type</td>
            <td>The type of scope, e.g., ACCOUNT.</td>
        </tr>
        <tr>
            <td>name</td>
            <td>The name of the pipeline rule, e.g., "Pipeline Rule".</td>
        </tr>
        <tr>
            <td>nrql</td>
            <td>The NRQL query defining the rule's logic, e.g., "DELETE version, message FROM MyEvent".</td>
        </tr>
    </tbody>
</table>


#### Response fields

<table>
    <thead>
        <tr>
            <th>Response Field</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>entity</td>
            <td>Object containing details about the created pipeline rule.</td>
        </tr>
        <tr>
            <td>entity.id</td>
            <td>The unique identifier of the rule.</td>
        </tr>
        <tr>
            <td>entity.type</td>
            <td>The type of the entity, indicating it is a pipeline rule.</td>
        </tr>
        <tr>
            <td>entity.name</td>
            <td>The name of the rule.</td>
        </tr>
        <tr>
            <td>entity.description</td>
            <td>A description of the rule, if provided.</td>
        </tr>
        <tr>
            <td>entity.nrql</td>
            <td>The NRQL query associated with the rule.</td>
        </tr>
    </tbody>
</table>

</Collapser>

<Collapser 
    id="get-rule" 
    title="Get Pipeline Cloud Rule"
    >

### Get rule [#get-rule]

The **hostedTelemetryRules** query retrieves details about a specific hosted telemetry rule in New Relic. This query allows users to access information such as the rule's ID, name, description, and metadata related to its creation and updates.

#### Example usage

    ```graphql
        hostedTelemetryRules {
            hostedTelemetryRule(id: 9876) {
                id
                name
                description
                rule
                createdAt
                createdBy
                updatedAt
                updatedBy
            }
        }
    ```

This example fetches details for the hosted telemetry rule with ID **9876**, providing comprehensive information about the rule and its history.

#### Parameters

<table>
    <thead>
        <tr>
            <th>Parameter</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>id</td>
            <td>The unique identifier of the hosted telemetry rule to retrieve, e.g., 9876.</td>
        </tr>
    </tbody>
</table>


#### Response Fields

<table>
    <thead>
        <tr>
            <th>Response Field</th>
            <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>id</td>
            <td>The unique identifier of the telemetry rule.</td>
        </tr>
        <tr>
            <td>name</td>
            <td>The name of the telemetry rule.</td>
        </tr>
        <tr>
            <td>description</td>
            <td>A brief description of the telemetry rule.</td>
        </tr>
        <tr>
            <td>rule</td>
            <td>The rule logic or definition associated with the telemetry rule.</td>
        </tr>
        <tr>
            <td>createdAt</td>
            <td>The timestamp indicating when the rule was created.</td>
        </tr>
        <tr>
            <td>createdBy</td>
            <td>The identifier or name of the user who created the rule.</td>
        </tr>
        <tr>
            <td>updatedAt</td>
            <td>The timestamp indicating when the rule was last updated.</td>
        </tr>
        <tr>
            <td>updatedBy</td>
            <td>The identifier or name of the user who last updated the rule.</td>
        </tr>
    </tbody>
</table>

</Collapser>

<Collapser 
    id="delete-rule" 
    title="Delete Pipeline Cloud Rule"
    >


### Delete rule [#delete-rule]

The **hostedTelemetryRulesDeleteRule** mutation is used to delete a specific hosted telemetry rule in New Relic. This mutation allows users to remove a rule by specifying its unique identifier.

#### Example usage

```graphql
    hostedTelemetryRules {
        hostedTelemetryRulesDeleteRule(ruleId: 9876) {
            id
        }
    }
```

This example deletes the hosted telemetry rule with ID **9876**. The response confirms the deletion by returning the ID of the deleted rule.

#### Parameters

<table>
    <thead>
        <tr>
        <th>Parameter</th>
        <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
        <td>ruleId</td>
        <td>The unique identifier of the hosted telemetry rule to be deleted, e.g., 9876.</td>
        </tr>
    </tbody>
</table>


#### Response Fields

<table>
    <thead>
        <tr>
        <th>Response Field</th>
        <th>Description</th>
        </tr>
    </thead>
    <tbody>
        <tr>
        <td>id</td>
        <td>The unique identifier of the telemetry rule that was deleted.</td>
        </tr>
    </tbody>
</table>

</Collapser>

</CollapserGroup>

### Example scenarios [#example-scenarios]

#### Drop events

Create a rule to drop specific events from your telemetry data.

```graphql
    hostedTelemetryRules {
        hostedTelemetryRulesCreateRule(accountId: 12345,
            ruleParameters: {
            name: "drop-debug-logs",
            description: "Drop all debug logs because they're expensive.",
            rule: "DELETE FROM Log WHERE level = 'DEBUG'"
            })
        { success { id } }
    }
```

#### Drop attributes

Create a rule to remove sensitive attributes from your logs.

```graphql
    hostedTelemetryRules {
        hostedTelemetryRulesCreateRule(accountId: 12345,
            ruleParameters: {
            name: "drop-api-key",
            description: "Drop the API key and Credit Card attributes from our logs so we donâ€™t leak them.",
            rule: "DELETE apiKey, cc FROM Log WHERE level = 'DEBUG'"
            })
        { success { id } }
    }
```
