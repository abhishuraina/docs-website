---
title: "Configuration"
metaDescription: "Overview of the Agent Control configuration"
freshnessValidatedDate: never
---
<Callout title="preview">
  We're still working on this feature, but we'd love for you to try it out!

  This feature is currently provided as part of a preview program pursuant to our [pre-release policies](/docs/licenses/license-information/referenced-policies/new-relic-pre-release-policy).
</Callout>

The Agent Control configuration file, [`values-newrelic.yaml`](https://github.com/newrelic/helm-charts/blob/master/charts/agent-control/values.yaml), is a key component of deploying and managing observability agents monitoring your Kubernetes clusters. This file allows you to specify settings and parameters that define how Agent Control and its managed agents operate. Understanding the structure and options available in this file will enable you to customize your deployment to meet your specific observability needs.

Here's how the configuration file looks:

<CollapserGroup>
  <Collapser
    id="agent-control-config"
    title="Agent Control configuration"
  >

    ```yaml
    global:
      cluster: "YOUR_CLUSTER_NAME"
      licenseKey: "YOUR_LICENSE_KEY"
      userKey: "YOUR_USER_KEY"

    # Values related to the agent control's Helm chart release.
    # `https://github.com/newrelic/helm-charts/blob/master/charts/agent-control/values.yaml`
    agent-control-deployment:
      config:
        fleet_control:
          # Optional: Specify a fleet_id (entity guid) to automatically connect to an existing fleet.
          fleet_id: ""
          auth:
            # New Relic organization ID where agent will connect to.
            organizationId: "YOUR_ORGANIZATION_ID"
        
        # List of managed agents that will be deployed. The key represents the name of the agent and the value holds the configuration.
        subAgents:
          # infrastructure:
          #   type: newrelic/com.newrelic.infrastructure:0.1.0
          #   content:
          #     # Ref: `https://github.com/newrelic/helm-charts/tree/master/charts/nri-bundle`
          #     # Recommended: check and define an explicit chart version (latest stable)
          #     chart_version: "*"   
          #     # chart_values:
          #     #   newrelic-infrastructure:
          #     #   enableProcessMetrics: true
          # logs:
          #   type: newrelic/io.fluentbit:0.1.0
          #   content:
          #     # Ref: `https://github.com/newrelic/helm-charts/tree/master/charts/newrelic-logging`
          #     # Recommended: check and define an explicit chart version (latest stable)
          #     chart_version: "*"
          #     # chart_values:
          #     #   newrelic-logging:
          #     #     sendMetrics: true
          # agent-operator:
          #   type: com.newrelic.k8s_agent_operator:0.1.0
          #   content:
          #     chart_version: "*"
          # open-telemetry:
          #   type: newrelic/io.opentelemetry.collector:0.2.0
          #   content:
          #     # Ref: `https://github.com/newrelic/helm-charts/blob/master/charts/nr-k8s-otel-collector/values.yaml`
          #     # Recommended: check and define an explicit chart version (latest stable)
          #     chart_version: "*"
          #     #  chart_values:
          #     #    nr-k8s-otel-collector:
          #     #      receivers.filelog.enabled: false
    ```

  </Collapser>

</CollapserGroup>

## Configuration modes
Agent Control and the managed agents support two configuration modes:

### Local configuration
When managing observability agents, you can use local configuration. This approach involves settings that reside directly within the environment where the agents operate. Here are the key aspects of local configuration:
- **Settings reside locally:** Configuration settings are maintained directly within the environment.
- **Read-only reporting:** Agent Control reports the health and effective configuration of managed agents in a read-only format to Fleet Control.

Local configuration is the default method.

### Remote configuration
For centralized management, choose remote configuration through Fleet Control. This method offers several advantages:
- **Remote management:** Provides centralized management for large-scale deployments, enabling you to apply agent settings across environments.
- **Local settings override:** When enabled, remote configuration takes precedence over local settings. Changes to local configuration are not considered.
- **Fallback to local:** If remote configuration is deleted, agents revert to local configuration if it is defined.
- **Effective configuration reporting:** Agent Control reports its own configuration and the configuration persisted for all managed agents.

{/* Agent Control uses Kubernetes `ConfigMaps` to persist both local and remote configurations. */}
