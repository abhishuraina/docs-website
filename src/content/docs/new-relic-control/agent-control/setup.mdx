---
title: "Set up Agent Control"
metaDescription: "Learn how to install and configure Agent Control in a Kubernetes cluster."
freshnessValidatedDate: never
---

<Callout title="preview">
  We're still working on this feature, but we'd love for you to try it out!

  This feature is currently provided as part of a preview program pursuant to our [pre-release policies](/docs/licenses/license-information/referenced-policies/new-relic-pre-release-policy).
</Callout>

There are two ways to install Agent Control:

## Guided
Log in to New Relic. In Integrations & Agents, click **Install Agent Control**, and then follow the on-screen instructions. 

## Manual
Follow the steps below to manually install Agent Control:

<Steps>
<Step>
  ## Add the New Relic Helm repository [#add-repo]

    1. Add the New Relic Helm repository to your local Helm environment by running:
      ```shell
            helm repo add newrelic https://helm-charts.newrelic.com
      ```

    2. If the New Relic Helm repo is already present in your local Helm environment, synchronize your environment with the upstream repos:
      ```shell
          helm repo update
      ```
</Step>

<Step>
  ## Define and validate configuration [#validate]

    1. Create [a YAML file](https://github.com/newrelic/helm-charts/blob/master/charts/agent-control/values.yaml) with your configuration settings.
      ```shell
            helm repo add newrelic https://helm-charts.newrelic.com
      ```

    2. Ensure that your configuration file is correctly set up with the necessary parameters, such as your cluster name, license key, and desired managed agents.
    ```shell
        helm repo update
    ```
</Step>
<Step>
  ## Install Agent Control [#install]

    - To install Agent Control, run this command:
    ```shell
        helm upgrade --install agent-control --version 0.0.34-beta --namespace newrelic --create-namespace newrelic/agent-control --values values-newrelic.yaml --devel
    ```

    This installs Agent Control in the `newrelic` namespace of your Kubernetes cluster. Note that this command specifies the chart version explicitly using the `–version` parameter, which is recommended.

    - Alternatively, you can use the following command to perform the same installation:
    ```shell
        helm upgrade --install agent-control --namespace newrelic --create-namespace newrelic/agent-control --values values-newrelic.yaml --devel
    ```

    This command doesn’t specify the chart version. Use it only when you are not sure of the chart version.

</Step>
<Step>
  ## Verify installation [#verify-install]

    Verify the status of your pods by running:
    ```shell
        kubectl get pods -n newrelic
    ```

    Log in to your New Relic account and navigate to the relevant dashboard to confirm that telemetry data from your Kubernetes cluster is being received. This step checks that the agents are correctly configured and sending data back to New Relic.

</Step>
</Steps>

## Steps to migrate to Agent Control [#migrate]
If your cluster is already instrumented with unmanaged New Relic agents, follow these steps to migrate:
1. Determine the existing instrumentation and configuration within your cluster. This may include New Relic Helm charts and Kubernetes manifests stored in your code repository.
2. Match your existing instrumentation with the supported agents in Agent Control.
3. Keep existing settings for each agent under the new configuration structure. Refer to Sample configurations as needed for formatting examples.
4. Uninstall your current instrumentation for [in-scope agents](). Refer to your existing agent documentation for instructions on how to uninstall them, and then prepare your cluster for the new setup.
5. Install Agent Control with your selected agents and settings. To do that, follow the steps in Steps to install Agent Control.
6. Confirm that the same instrumentation is available and now managed by Fleet Control.

## Uninstall Agent Control [#uninstall]
Follow the steps below to uninstall Agent Control:

<Steps>
<Step>
  ## View installed releases [#list-releases]

  First, run the following command to view the installed releases along with their release names and namespaces:
  ```shell
          helm list --all-namespaces
    ```
</Step>

  <Step>
    ## Uninstall Agent Control [#uninstall-agent-control]

    - To uninstall Agent Control, run the following command, making sure to replace `<RELEASE>` and `<NAMESPACE>` with the appropriate values for your installation:
      ```shell
            helm uninstall <RELEASE> -n <NAMESPACE>
      ```

    - For example:
      ```shell
            helm uninstall agent-control -n newrelic
      ```

 </Step>
</Steps>

After Agent Control is set up, set up Fleet Control.