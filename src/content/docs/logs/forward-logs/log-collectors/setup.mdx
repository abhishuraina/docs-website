---
title: Setup
metaDescription: 'Learn how to set up lifecycle management for your log collector in New Relic.'
freshnessValidatedDate: never
---

<Callout title="preview">
  We're still working on this feature, but we'd love for you to try it out!

  This feature is currently provided as part of a preview program pursuant to our [pre-release policies](/docs/licenses/license-information/referenced-policies/new-relic-pre-release-policy).
</Callout>

This guide provides a walkthrough for setting up Fluent Bit logging with New Relic Control.

## Prerequisites
Before you begin, ensure that you have completed the prerequisites outlined in the Prerequisites section and have New Relic Control enabled.

## Install Fluent Bit with Fleet Control
If you're starting with Fleet Control, you'll set up your agent control configuration first. This process includes installing the Fluent Bit agent and other essential components. 

To use Fluent Bit with Agent Control, enable log forwarding as part of the Agent Control installation, as shown in the sample configuration:

```yaml
    global:
  cluster: "YOUR_CLUSTER_NAME"
  licenseKey: "YOUR_LICENSE_KEY"
  userKey: "YOUR_USER_KEY"

# Values related to the agent control's Helm chart release.
# `https://github.com/newrelic/helm-charts/blob/master/charts/agent-control/values.yaml`
agent-control-deployment:
  config:
    fleet_control:
      # Optional: Specify a fleet_id (entity guid) to automatically connect to an existing fleet.
      fleet_id: ""
      auth:
        # New Relic organization ID where agent will connect to.
        organizationId: "YOUR_ORGANIZATION_ID"
    
    # List of managed agents that will be deployed. The key represents the name of the agent and the value holds the configuration.
    subAgents:
      # infrastructure:
      #   type: newrelic/com.newrelic.infrastructure:0.1.0
      #   content:
      #     # Ref: `https://github.com/newrelic/helm-charts/tree/master/charts/nri-bundle`
      #     # Recommended: check and define an explicit chart version (latest stable)
      #     chart_version: "*"   
      #     # chart_values:
      #     #   newrelic-infrastructure:
      #     #   enableProcessMetrics: true
      logs:
        type: newrelic/io.fluentbit:0.1.0
        content:
          # Ref: `https://github.com/newrelic/helm-charts/tree/master/charts/newrelic-logging`
          # Recommended: check and define an explicit chart version (latest stable)
          chart_version: "*"
          chart_values:
            newrelic-logging:
              sendMetrics: true
      # agent-operator:
      #   type: com.newrelic.k8s_agent_operator:0.1.0
      #   content:
      #     chart_version: "*"
      # open-telemetry:
      #   type: newrelic/io.opentelemetry.collector:0.2.0
      #   content:
      #     # Ref: `https://github.com/newrelic/helm-charts/blob/master/charts/nr-k8s-otel-collector/values.yaml`
      #     # Recommended: check and define an explicit chart version (latest stable)
      #     chart_version: "*"
      #     #  chart_values:
      #     #    nr-k8s-otel-collector:
      #     #      receivers.filelog.enabled: false
```

Remember to uncomment the necessary configurations and replace placeholders such as YOUR_CLUSTER_NAME and YOUR_LICENSE_KEY with your actual values.

<Callout variant="important">
  Specify an explicit chart version to ensure consistency and reliability across deployments.
</Callout>

## Install Fluent Bit without Fleet Control
You can still onboard without using Fleet Control. Even without Fleet Control, you will be able to see health monitoring and agent version tracking through the Installed tab. 

For information on installing Fluent Bit without Agent Control, see [Kubernetes plugin for log forwarding](/docs/logs/forward-logs/kubernetes-plugin-log-forwarding).

## Manage and deploy configuration via Fleet Control
In order to add a new configuration or to edit an existing configuration for Fluent Bit logging, you can use Fleet Control. For information on getting started with Fleet Control see [LINK TO DOC]. The high-level tasks to manage and deploy a configuration are:
1. Create a configuration.
2. Create a deployment.
3. Deploy the configuration.

### Create a configuration

To create a Fluent Bit configuration, follow these steps:
1. In New Relic, go to All Capabilities, search for New Relic Control, and then pin it to the side.
2. In New Relic Control, open Configurations.
3. Click **Create configuration**.
4. To create a configuration from scratch, click **New** in the drop-down menu. If you have an existing Fluent Bit configuration and want to leverage it, clone it by clicking **Clone**.
5. In the Create configuration dialog box, ensure **Kubernetes** is selected as the environment, select **Fluent Bit** as the agent type, and enter a name for the configuration. Then, click **Continue**.
6. In the Configuration column, copy the configuration template and then customize it per your requirements. See [Configuration overview] to learn about the different settings.
7. Save your changes. Your configuration will be added to the list of configurations on the Configuration page.
8. To edit your configuration, select the three dots (…) next to it, click **Edit configuration**, and make your changes. Then, click Save.

### Create a deployment
1. In New Relic Control, open Fleets.
2. Select the fleet you want to create a Fluent Bit configuration for.
3. Click **Create a deployment**.
4. On the New deployment page, enter a deployment name and description, and then click **Add a configuration**.
5. Select **Fluent Bit** as the agent type, select the configuration you want to deploy, and then click **Next**.
6. Select the configuration version. 
<Callout variant="important">
  A configuration can have multiple versions. Choose the version you want to deploy. For a newly created configuration, you’ll have only one version.
</Callout>
7. Click **Add to deployment**. 
<Callout variant="important">
  Ensure the fleet has at least one managed entity. Or, add one.
</Callout>
8. Click **Start deployment**. 

### Create a deployment


After deploying your configuration, view the details of your fleet. In Fleet Control, select the specific fleet you want to work with. This opens the fleet detail page. The Summary tab shows the entities that are part of your fleet. To view agent or deployment details, use the Agents or the Deployments tab.
