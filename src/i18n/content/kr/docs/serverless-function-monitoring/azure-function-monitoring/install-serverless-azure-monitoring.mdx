---
title: Install and configure Azure Function monitoring on New Relic
metaDescription: Configure your Azure Functions with New Relic
freshnessValidatedDate: never
translationType: machine
---

## 시작하기 전에 [#begin]

Ensure that your Azure Function meets our [compatibility and requirements](/docs/serverless-function-monitoring/azure-function-monitoring/compatibility-requirement-azure-monitoring).

<Steps>
  <Step>
    ## Azure 계정을 뉴렐릭에 연결하세요

    Azure Monitor 지표의 폴링을 구성하여 Azure 계정을 뉴렐릭에 연결할 수 있습니다. 이렇게 하면 뉴렐릭 UI 에서 테크닉을 볼 수 있습니다. 자세한 내용은 [Azure 통합을](https://docs.newrelic.com/docs/infrastructure/microsoft-azure-integrations/azure-integrations-list/azure-functions-monitoring-integration/#polling) 참조하세요.
  </Step>

  <Step>
    ## Instrument your Azure Function with the New Relic .NET Agent

    Depending on your deployment environment, select one of the following options to instrument your Azure Function with the New Relic .NET agent.

    <Tabs>
      <TabsBar>
        <TabsBarItem id="linux-instrumentation">Linux</TabsBarItem> <TabsBarItem id="windows-instrumentation">Windows</TabsBarItem> <TabsBarItem id="containerized-instrumentation">Containerized Function</TabsBarItem>
      </TabsBar>

      <TabsPages>
        <TabsPageItem id="linux-instrumentation">
          1. Add the latest version of the `NewRelic.Agent` NuGet package to your application project.

          2. Use your preferred publishing mechanism to deploy your updated application to Azure.

          When you deploy your application, the .NET agent is installed in the `/home/site/wwwroot/newrelic` folder.
        </TabsPageItem>

        <TabsPageItem id="windows-instrumentation">
          You can instrument your Azure Function with the New Relic .NET agent on Windows in the following ways:

          <CollapserGroup>
            <Collapser id="website-extension" title="Use the New Relic Azure Websites Extension">
              The New Relic Azure Websites Extension (v1.6.0 and later) automatically installs the latest version of the .NET agent and configures instrumentation for your Windows Azure Function. To install the New Relic Azure Websites Extension, follow these steps:

              1. Azure Portal에서 함수 앱으로 이동합니다.
              2. <DNT>**Development tools**</DNT> 섹션을 클릭하고 <DNT>**Extensions**</DNT> 선택하세요.
              3. <DNT>**+ Add**</DNT> 을(를) 클릭합니다.
              4. <DNT>**Search for an extension to install**</DNT> 선택하고 <DNT>**Filter items**</DNT> 상자에 `New Relic .NET Agent` 입력합니다.
              5. <DNT>**New Relic .NET Agent(vx.x.x) - New Relic**</DNT> 확장자를 선택하고 <DNT>**Add**</DNT> 클릭하세요.
              6. When installation is complete, the extension appears in the list of installed extensions. To verify correct installation, click the link under the <DNT>**Browse**</DNT> column to view the installation log. The Azure Websites Extension configures all required environment variables except your license key (see the next step for details). The .NET agent is installed to `C:\home\NewRelicAgent` and log files are written to `C:\home\LogFiles\NewRelic`.
            </Collapser>

            <Collapser id="nuget-package" title="Add the New Relic agent NuGet package to your project">
              1. Add the latest version of the `NewRelic.Agent` NuGet package to your application project.
              2. Use your preferred publishing mechanism to deploy your updated application to Azure. When you deploy your application, the .NET agent is installed in the `C:\home\site\wwwroot\newrelic` folder. You need to configure required environment variables in the next step.
            </Collapser>
          </CollapserGroup>
        </TabsPageItem>

        <TabsPageItem id="containerized-instrumentation">
          To install the New Relic .NET agent, add the following lines to the final stage of your Dockerfile:

          ```dockerfile
          # Install the latest New Relic .NET agent using the apt-get package manager
          # To install a specific version of the .NET agent, add the version number to the apt-get install line (i.e. apt-get install -y newrelic-dotnet-agent=10.38.0)
          RUN apt-get update && apt-get install -y wget ca-certificates gnupg \
              && echo 'deb http://apt.newrelic.com/debian/ newrelic non-free' | tee /etc/apt/sources.list.d/newrelic.list \
              && wget https://download.newrelic.com/548C16BF.gpg \
              && apt-key add 548C16BF.gpg \
              && apt-get update \
              && apt-get install -y newrelic-dotnet-agent \
              && rm -rf /var/lib/apt/lists/*
          ```

          When you deploy your application, the .NET agent is installed in the `/usr/local/newrelic-dotnet-agent` folder.
        </TabsPageItem>
      </TabsPages>
    </Tabs>
  </Step>

  <Step>
    ## 환경 변수 구성

    After you&apos;ve instrumented your Azure Function with the New Relic .NET Agent, configure environment variables:

    1. Navigate to your Azure Function in the Azure portal.
    2. Under **Settings**, click **Environment variables**, and then click **Advanced edit**.
    3. Based on your deployment environment, paste the following values:

    <Callout variant="important">
      Ensure that you add a comma at the end of the last existing line and update your license key in the following configurations.
    </Callout>

    <Tabs>
      <TabsBar>
        <TabsBarItem id="linux-configuration">Linux</TabsBarItem> <TabsBarItem id="windows-configuration">Windows</TabsBarItem> <TabsBarItem id="containerized-configuration">Containerized Function</TabsBarItem>
      </TabsBar>

      <TabsPages>
        <TabsPageItem id="linux-configuration">
          ```json
          {
            "name": "CORECLR_ENABLE_PROFILING",
            "value": "1",
            "slotSetting": false
          },
          {
            "name": "CORECLR_NEW_RELIC_HOME",
            "value": "/home/site/wwwroot/newrelic",
            "slotSetting": false
          },
          {
            "name": "CORECLR_PROFILER",
            "value": "{36032161-FFC0-4B61-B559-F6C5D41BAE5A}",
            "slotSetting": false
          }, 
          {
            "name": "CORECLR_PROFILER_PATH",
            "value": "/home/site/wwwroot/newrelic/libNewRelicProfiler.so",
            "slotSetting": false
          },
          {
            "name": "NEW_RELIC_LOG_DIRECTORY",
            "value": "/home/LogFiles/NewRelic",
            "slotSetting": false
          },
          {
            "name": "NEW_RELIC_LICENSE_KEY",
            "value": "<your newrelic license key here>",
            "slotSetting": false
          }
          ```
        </TabsPageItem>

        <TabsPageItem id="windows-configuration">
          ### New Relic Azure Websites Extension:

          ```json
          {
            "name": "NEW_RELIC_LICENSE_KEY",
            "value": "<your newrelic license key here>",
            "slotSetting": false
          }
          ```

          선택적으로 다음 환경 변수를 추가하여 설치하려는 .NET 에이전트의 버전을 지정할 수 있습니다.

          ```json
          {
            "name": "NEW_RELIC_AGENT_VERSION_OVERRIDE",
            "value": "10.38.0",
            "slotSetting": false
          }
          ```

          ### NewRelic.Agent Nuget package:

          ```json
          {
            "name": "CORECLR_ENABLE_PROFILING",
            "value": "1",
            "slotSetting": false
          },
          {
            "name": "CORECLR_NEW_RELIC_HOME",
            "value": "C:\home\site\wwwroot\newrelic",
            "slotSetting": false
          },
          {
            "name": "CORECLR_PROFILER",
            "value": "{36032161-FFC0-4B61-B559-F6C5D41BAE5A}",
            "slotSetting": false
          }, 
          {
            "name": "CORECLR_PROFILER_PATH_32",
            "value": "C:\home\site\wwwroot\newrelic\x86\NewRelic.Profiler.dll",
            "slotSetting": false
          },
          {
            "name": "CORECLR_PROFILER_PATH_64",
            "value": "C:\home\site\wwwroot\newrelic\NewRelic.Profiler.dll",
            "slotSetting": false
          },
          {
            "name": "COR_ENABLE_PROFILING",
            "value": "1",
            "slotSetting": false
          },
          {
            "name": "NEW_RELIC_HOME",
            "value": "C:\home\site\wwwroot\newrelic",
            "slotSetting": false
          },
          {
            "name": "COR_PROFILER",
            "value": "{71DA0A04-7777-4EC6-9643-7D28B46A8A41}",
            "slotSetting": false
          }, 
          {
            "name": "COR_PROFILER_PATH_32",
            "value": "C:\home\site\wwwroot\newrelic\x86\NewRelic.Profiler.dll",
            "slotSetting": false
          },
          {
            "name": "COR_PROFILER_PATH_64",
            "value": "C:\home\site\wwwroot\newrelic\NewRelic.Profiler.dll",
            "slotSetting": false
          },
          {
            "name": "NEW_RELIC_LOG_DIRECTORY",
            "value": "C:\home\LogFiles\NewRelic",
            "slotSetting": false
          },
          {
            "name": "NEW_RELIC_LICENSE_KEY",
            "value": "<your newrelic license key here>",
            "slotSetting": false
          }
          ```
        </TabsPageItem>

        <TabsPageItem id="containerized-configuration">
          ```json
          {
            "name": "CORECLR_ENABLE_PROFILING",
            "value": "1",
            "slotSetting": false
          },
          {
            "name": "CORECLR_NEW_RELIC_HOME",
            "value": "/usr/local/newrelic-dotnet-agent",
            "slotSetting": false
          },
          {
            "name": "CORECLR_PROFILER",
            "value": "{36032161-FFC0-4B61-B559-F6C5D41BAE5A}",
            "slotSetting": false
          }, 
          {
            "name": "CORECLR_PROFILER_PATH",
            "value": "/usr/local/newrelic-dotnet-agent/libNewRelicProfiler.so",
            "slotSetting": false
          },
          {
            "name": "NEW_RELIC_LOG_DIRECTORY",
            "value": "/home/LogFiles/NewRelic",
            "slotSetting": false
          },
          {
            "name": "NEW_RELIC_LICENSE_KEY",
            "value": "<your newrelic license key here>",
            "slotSetting": false
          }
          ```
        </TabsPageItem>
      </TabsPages>
    </Tabs>
  </Step>

  <Step>
    ## Restart your Azure Function

    After you&apos;ve added the environment variables, restart your Azure Function to apply the changes.
  </Step>
</Steps>

## 무엇 향후 계획

After you complete the installation and configuration steps, send traffic to your Azure Function to see the metrics in the New Relic UI dashboard.